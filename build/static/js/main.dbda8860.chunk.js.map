{"version":3,"sources":["AlertDanger.jsx","utils.js","RequestAccess.jsx","CameraAccess.jsx","StoreContext.js","useDropDown.js","reducers.js","Devices.jsx","useVideoStream.js","useRecognition.js","FacesDetector.jsx","PersonInfo.jsx","Camera.jsx","base/index.js","App.jsx","api/users.js","index.js"],"names":["AlertDanger","_ref","title","children","react_default","a","createElement","className","data-uk-alert","_getMedia","navigator","getUserMedia","webkitGetUserMedia","moxGetUserMedia","mozGetUserMedia","msGetUserMedia","getMedia","getMediaFor","constraintToUse","mediaDevices","RequestAccess","onAccess","handleClick","useCallback","_ref2","Object","asyncToGenerator","regenerator_default","mark","_callee","e","log","wrap","_context","prev","next","preventDefault","video","audio","sent","t0","stop","_x","apply","this","arguments","onClick","CameraAccess","_useState","useState","undefined","_useState2","slicedToArray","hasCameraAccess","setHasCameraAccess","_useState3","_useState4","error","setError","handleOnAccess","accessAllowed","src_RequestAccess","src_AlertDanger","message","initialState","faceResult","statusRecognition","selectedDevice","StoreContext","createContext","useDropDown","opts","length","dropDownRef","useRef","useEffect","dropDownEl","current","UiKit","dropdown","$destroy","SELECT_DEVICE","AUTH","mainReducer","state","action","type","objectSpread2","payload","authUser","Device","device","active","dispatch","useContext","clsx","uk-active","handleCkick","label","Devices","_useContext2","devices","setDevices","_loadDevices","videoDevices","enumerateDevices","filter","kind","loadDevices","dropdownRef","mode","boundary","boundary-align","react","href","data-uk-icon","ref","map","Devices_Device","key","deviceId","useVideoStream","constraints","videoRef","isStartingStream","setIsStartingStream","streamRef","startStream","stream","srcObject","src","URL","createObjectURL","setAttribute","play","finish","videoEl","streamEl","isStarting","faceDetectorOptions","TinyFaceDetectorOptions","inputSize","scoreThreshold","LOADING_MODELS_STATUS","LOADING_MODELS_ERROR_STATUS","useRecognition","ready","canvasEl","contextCanvas","requestAnimationFrameToken","status","setStatus","_useState5","_useState6","faceDetected","setFaceDetected","startDetection","face","dims","resizedResults","window","cancelAnimationFrame","readyState","HAVE_ENOUGH_DATA","detectSingleFace","withAgeAndGender","withFaceExpressions","matchDimensions","resizeResults","draw","drawDetections","drawFaceExpressions","clearRect","videoWidth","videoHeight","requestAnimationFrame","_loadModels","_callee2","_context2","Promise","all","loadTinyFaceDetectorModel","loadFaceExpressionModel","loadFaceRecognitionModel","loadAgeGenderModel","getContext","loadModels","FacesDetector","_useContext","canvasRef","containerRef","useMemo","facingMode","width","min","height","frameRate","ideal","exact","_useVideoStream","isStartingCamera","_useRecognition","errorRecognition","useLayoutEffect","handleOnReady","containerEl","concat","offsetWidth","offsetHeight","addEventListener","removeEventListener","data-uk-data-grid","data-uk-spinner","playsInline","muted","preload","expressionI18N","angry","disgusted","fearful","happy","neutral","sad","surprised","PersonInfo","person","orderedExpressions","entries","expressions","sort","b","valueA","exp","value","topExpression","genderProbability","toFixed","gender","age","Camera","src_FacesDetector","src_PersonInfo","console","app","firebase","initializeApp","appId","process","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","measurementId","setLogLevel","auth","useDeviceLanguage","settings","appVerificationDisabledForTesting","firestore","FIRESTORE_EMULATOR_HOST","warn","host","ssl","useAuth","callback","isAuthenticating","setIsAuthenticating","handleAuthStateChanged","user","profile","userId","uid","collection","doc","get","data","signInAnonymously","subscriptionAuth","onAuthStateChanged","App","_useReducer","useReducer","_useReducer2","handleCameraAccess","setHandleCameraAccess","src_StoreContext","Provider","data-uk-navbar","src_Devices","src_Camera","src_CameraAccess","target","UIkit","use","Icons","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.dbda8860.chunk.js","sourcesContent":["import React from \"react\";\n\nconst AlertDanger = ({ title, children }) => (\n  <div className=\"uk-alert-danger\" data-uk-alert=\"\">\n      {title && (<h3>{title}</h3>)}\n    <p>{children}</p>\n  </div>\n);\n\nexport default AlertDanger;\n","const _getMedia =\n    navigator.getUserMedia || // use the proper vendor prefix\n    navigator.webkitGetUserMedia ||\n    navigator.moxGetUserMedia ||\n    navigator.mozGetUserMedia ||\n    navigator.msGetUserMedia;\n\nnavigator.getMedia = _getMedia;\n\nexport const getMediaFor = (constraintToUse) => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        return navigator.mediaDevices.getUserMedia(constraintToUse);\n    }\n    return navigator.getMedia\n        ? navigator.getMedia(constraintToUse)\n        : _getMedia(constraintToUse);\n};\n\n\n// const _getWebcam =\n//     navigator.getUserMedia ||\n//     navigator.webKitGetUserMedia ||\n//     navigator.moxGetUserMedia ||\n//     navigator.mozGetUserMedia ||\n//     navigator.msGetUserMedia;\n//\n// const getWebCamFor =\n//     (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ||\n//     _getWebcam;\n//\n// export const getMediaFor = (constraintToUse) => {\n//     if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n//         return getWebCamFor(constraintToUse);\n//     }\n//     return getWebCamFor(constraintToUse);\n// };\n","import React, {useCallback} from \"react\";\nimport {getMediaFor} from \"./utils\";\n\nconst RequestAccess = ({onAccess}) => {\n    const handleClick = useCallback(\n        async e => {\n            e.preventDefault();\n            try {\n                const log = await getMediaFor({video: true, audio: false});\n                onAccess(null, log);\n            } catch (error) {\n                onAccess(error);\n            }\n        },\n        [onAccess]\n    );\n\n    return (\n        <div className=\"uk-width-large@l uk-width-expand uk-text-center\">\n            <div data-uk-alert=\"\">\n                <p className=\"uk-text-lead\">\n                    PARA DETECTAR SUA FACE PRECISAMOS DE ACESSO A SUA CÂMERA.\n                </p>\n                <button\n                    className=\"uk-button uk-button-primary uk-button-large\"\n                    onClick={handleClick}\n                >\n                    Permir acesso\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default RequestAccess;\n","import React, {useCallback, useState} from \"react\";\nimport AlertDanger from \"./AlertDanger\";\nimport RequestAccess from \"./RequestAccess\";\n\nconst CameraAccess = ({onAccess}) => {\n    const [hasCameraAccess, setHasCameraAccess] = useState(undefined);\n    const [error, setError] = useState(undefined);\n\n    const handleOnAccess = useCallback((error, accessAllowed) => {\n        setHasCameraAccess(accessAllowed);\n        setError(error);\n        if (accessAllowed) {\n            onAccess(accessAllowed);\n        }\n    }, [setHasCameraAccess]);\n\n    return (\n        <div className=\"uk-flex uk-flex-center uk-flex-middle uk-flex-column\">\n            {hasCameraAccess === undefined && (\n                <RequestAccess onAccess={handleOnAccess}/>\n            )}\n\n            {error && (\n                <AlertDanger title=\"Falha ao tentar acessar a câmera\">\n                    {error.message}\n                </AlertDanger>\n            )}\n        </div>\n    );\n};\n\nexport default CameraAccess;\n","import { createContext } from \"react\";\n\nexport const initialState = {\n  faceResult: undefined,\n  statusRecognition: undefined,\n  selectedDevice: undefined\n};\n\nconst StoreContext = createContext(initialState);\n\nexport default StoreContext;\n","import { useEffect, useRef } from \"react\";\nimport UiKit from \"uikit\";\n\nconst useDropDown = (opts = {}) => {\n  const dropDownRef = useRef(null);\n\n  useEffect(() => {\n    const dropDownEl = dropDownRef.current;\n    UiKit.dropdown(dropDownEl, opts);\n\n    return () => {\n      UiKit.dropdown(dropDownEl, opts).$destroy();\n    };\n    // data-uk-dropdown=\"mode: click; boundary: ! .uk-button-group; boundary-align: true;\"\n  }, [dropDownRef, opts]);\n\n  return dropDownRef;\n};\n\nexport default useDropDown;\n","export const SELECT_DEVICE = \"SELECT_DEVICE\";\nexport const SET_STATUS_RECOGNITION = \"SET_STATUS_RECOGNITION\";\nexport const SET_FACES_RESULT = \"SET_FACES_RESULT\";\nexport const AUTH = \"AUTH\";\n\nexport const mainReducer = (state, action) => {\n  switch (action.type) {\n    case SELECT_DEVICE:\n      return { ...state, selectedDevice: action.payload };\n    case SET_STATUS_RECOGNITION:\n      return { ...state, statusRecognition: action.payload };\n    case SET_FACES_RESULT:\n      return { ...state, faceResult: action.payload };\n    case AUTH:\n      return { ...state, authUser: action.payload };\n\n    default:\n      return state;\n  }\n};\n\nexport default mainReducer;\n","import React, {\n  useCallback,\n  useState,\n  useEffect,\n  useContext,\n  Fragment\n} from \"react\";\nimport clsx from \"clsx\";\nimport useDropDown from \"./useDropDown\";\nimport StoreContext from \"./StoreContext\";\nimport { SELECT_DEVICE } from \"./reducers\";\n\nconst Device = ({ device, active }) => {\n  const { dispatch } = useContext(StoreContext);\n  const className = clsx({\n    \"uk-active\": active\n  });\n\n  const handleCkick = useCallback(\n      e => {\n        e.preventDefault();\n        dispatch({ type: SELECT_DEVICE, payload: device });\n      },\n      [device, dispatch]\n  );\n\n  return (\n      <li className={className}>\n        <button className=\"uk-button uk-button-text\" onClick={handleCkick}>\n          {device.label}\n        </button>\n      </li>\n  );\n};\n\nconst Devices = () => {\n  const { state, dispatch } = useContext(StoreContext);\n  const [devices, setDevices] = useState([]);\n\n  useEffect(() => {\n    async function loadDevices() {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(\n          device => device.kind === \"videoinput\"\n      );\n      setDevices(videoDevices);\n      if (videoDevices.length > 0) {\n        dispatch({ type: SELECT_DEVICE, payload: videoDevices[0] });\n      }\n    }\n\n    if (navigator.mediaDevices) {\n        loadDevices();\n    }\n  }, [dispatch]);\n\n  const dropdownRef = useDropDown({\n    mode: \"click\",\n    boundary: \"! .uk-button-group\",\n    \"boundary-align\": true\n  });\n\n  return (\n      <Fragment>\n        <a href=\"#\">\n          {state.selectedDevice\n              ? state.selectedDevice.label\n              : \"Selecionar câmera\"}\n          <span data-uk-icon=\"icon:  triangle-down\" />\n        </a>\n        <div className=\"uk-navbar-dropdown\" ref={dropdownRef}>\n          <ul className=\"uk-nav uk-navbar-dropdown-nav\">\n            {devices.map(device => (\n                <Device\n                    device={device}\n                    key={device.deviceId}\n                    active={\n                      state.selectedDevice &&\n                      device.deviceId === state.selectedDevice.deviceId\n                    }\n                />\n            ))}\n          </ul>\n        </div>\n      </Fragment>\n  );\n};\n\nexport default Devices;\n","import {useCallback, useState, useEffect, useRef} from \"react\";\nimport {getMediaFor} from \"./utils\";\n\nfunction useVideoStream(constraints = {}) {\n    const videoRef = useRef(null);\n    const [error, setError] = useState(undefined);\n    const [isStartingStream, setIsStartingStream] = useState(true);\n    const streamRef = useRef(null);\n\n    const startStream = useCallback(async () => {\n        try {\n            setIsStartingStream(true);\n            setError(undefined);\n            const stream = await getMediaFor(constraints);\n\n            if (\"srcObject\" in videoRef.current) {\n                // eslint-disable-next-line require-atomic-updates\n                videoRef.current.srcObject = stream;\n            } else {\n                // Avoid using this in new browsers, as it is going away.\n                // eslint-disable-next-line require-atomic-updates\n                videoRef.current.src = URL.createObjectURL(stream);\n            }\n\n            // https://stackoverflow.com/a/54678952\n            videoRef.current.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\n            videoRef.current.setAttribute(\"autoplay\", \"\");\n            videoRef.current.setAttribute(\"muted\", \"\");\n            // videoRef.current.pause();\n            videoRef.current.play();\n            streamRef.current = stream;\n        } catch (error) {\n            setError(error);\n        } finally {\n            setIsStartingStream(false);\n        }\n    }, [constraints, videoRef, streamRef]);\n\n    useEffect(() => {\n        startStream();\n    }, []);\n\n    useEffect(() => {\n        const videoEl = videoRef.current;\n        const streamEl = streamRef.current;\n        return () => {\n            if (videoEl) {\n                streamEl && streamEl.stop && streamEl.stop();\n                streamRef.current = undefined;\n                videoEl.src = null;\n                videoRef.current = undefined;\n            }\n        };\n    }, [streamRef, videoRef]);\n\n    return {ref: videoRef, isStarting: isStartingStream, error, streamRef};\n}\n\nexport default useVideoStream;\n","import { useState, useRef, useCallback, useEffect } from \"react\";\nimport {\n  loadTinyFaceDetectorModel,\n  loadFaceExpressionModel,\n  loadAgeGenderModel,\n  loadFaceRecognitionModel,\n  detectSingleFace,\n  TinyFaceDetectorOptions,\n  resizeResults,\n  matchDimensions,\n  // getMediaDimensions,\n  draw\n} from \"face-api.js\";\n\nconst faceDetectorOptions = new TinyFaceDetectorOptions({\n  inputSize: 224,\n  scoreThreshold: 0.5\n});\n\nexport const STARTING_STATUS = \"Iniciando\";\nexport const LOADING_MODELS_STATUS = \"Carregando Modelos\";\nexport const LOADING_MODELS_ERROR_STATUS = \"Erro ao tentar carregar modelos\";\nexport const WAITING_VIDEO_STATUS = \"Aguardando video\";\nexport const STARTING_DETECTIONS_STATUS = \"Detectando rostos\";\nexport const READY_STATUS = \"Concluído\";\n\nconst useRecognition = (ready, canvasEl, videoEl) => {\n  const contextCanvas = useRef(null);\n  const requestAnimationFrameToken = useRef(null);\n  const [status, setStatus] = useState(STARTING_STATUS);\n  const [error, setError] = useState(undefined);\n  const [faceDetected, setFaceDetected] = useState(undefined);\n\n  const startDetection = useCallback(async () => {\n    if (requestAnimationFrameToken.current) {\n      window.cancelAnimationFrame(requestAnimationFrameToken.current);\n    }\n\n    if (videoEl.readyState === videoEl.HAVE_ENOUGH_DATA) {\n      setStatus(STARTING_DETECTIONS_STATUS);\n      const face = await detectSingleFace(videoEl, faceDetectorOptions)\n          .withAgeAndGender()\n          .withFaceExpressions();\n\n      setStatus(READY_STATUS);\n      if (face) {\n        setFaceDetected(face);\n        const dims = matchDimensions(canvasEl, videoEl, true);\n        const resizedResults = resizeResults(face, dims);\n        draw.drawDetections(canvasEl, resizedResults);\n        draw.drawFaceExpressions(canvasEl, resizedResults);\n      } else {\n        setFaceDetected(undefined);\n        contextCanvas.current.clearRect(\n            0,\n            0,\n            videoEl.videoWidth,\n            videoEl.videoHeight\n        );\n      }\n    } else {\n      setStatus(WAITING_VIDEO_STATUS);\n    }\n    requestAnimationFrameToken.current = requestAnimationFrame(startDetection);\n  }, [videoEl, canvasEl]);\n\n  useEffect(() => {\n    async function loadModels() {\n      try {\n        setStatus(LOADING_MODELS_STATUS);\n        setError(undefined);\n        await Promise.all([\n          loadTinyFaceDetectorModel(\"/models\"),\n          loadFaceExpressionModel(\"/models\"),\n          loadFaceRecognitionModel(\"/models\"),\n          loadAgeGenderModel(\"/models\")\n        ]);\n        contextCanvas.current = canvasEl.getContext(\"2d\");\n        startDetection();\n      } catch (error) {\n        setError(error);\n        setStatus(LOADING_MODELS_ERROR_STATUS);\n      }\n    }\n    if (ready) {\n      loadModels();\n    }\n  }, [ready, canvasEl, startDetection]);\n\n  // useEffect(() => {\n  //   function playingCallback() {\n  //     console.log(\"Playing....\");\n  //   }\n\n  //   if (videoEl) {\n  //     videoEl.addEventListener(\"playing\", playingCallback);\n  //   }\n  //   return () => {\n  //     if (videoEl) {\n  //       videoEl.removeEventListener(\"playing\", playingCallback);\n  //     }\n  //   };\n  // }, [videoEl]);\n\n  return { status, error, faceDetected: faceDetected };\n};\n\nexport default useRecognition;\n","import React, {\n    useMemo,\n    Fragment,\n    useRef,\n    useContext,\n    useLayoutEffect,\n    useEffect, useCallback\n} from \"react\";\nimport AlertDanger from \"./AlertDanger\";\nimport useVideoStream from \"./useVideoStream\";\nimport useRecognition from \"./useRecognition\";\nimport StoreContext from \"./StoreContext\";\nimport {SET_STATUS_RECOGNITION, SET_FACES_RESULT} from \"./reducers\";\n\nconst FacesDetector = ({children}) => {\n    const {state, dispatch} = useContext(StoreContext);\n\n    const canvasRef = useRef(null);\n    const containerRef = useRef(null);\n\n    const constraints = useMemo(() => {\n        const defaultConstraints = {\n            audio: false,\n            video: {\n                facingMode: \"user\",\n                // aspectRatio: 1.777777778,\n                width: {\n                    min: 320\n                },\n                height: {\n                    min: 240\n                },\n                frameRate: {\n                    ideal: 60,\n                    min: 10\n                }\n            },\n        };\n\n        return {\n            ...defaultConstraints,\n            deviceId: state.selectedDevice\n                ? {exact: state.selectedDevice.deviceId}\n                : undefined\n        };\n    }, [state]);\n\n    const {\n        ref: videoRef,\n        isStarting: isStartingCamera,\n        error,\n        streamRef\n    } = useVideoStream(constraints);\n\n    const {\n        status: statusRecognition,\n        error: errorRecognition,\n        faceDetected\n    } = useRecognition(\n        streamRef.current && !isStartingCamera,\n        canvasRef.current,\n        videoRef.current\n    );\n\n    useLayoutEffect(() => {\n        dispatch({type: SET_STATUS_RECOGNITION, payload: statusRecognition});\n        dispatch({type: SET_FACES_RESULT, payload: faceDetected});\n    }, [dispatch, faceDetected, statusRecognition]);\n\n\n    const handleOnReady = useCallback(() => {\n            const containerEl = containerRef.current;\n            // const videoEl = videoRef.current;\n            if (containerEl) {\n                containerEl.setAttribute('style', `width: ${videoRef.current.offsetWidth}px; height: ${videoRef.current.offsetHeight}px`)\n                // const canvasWidth = videoEl.offsetWidth > videoEl.videoWidth ? videoEl.videoWidth : videoEl.offsetWidth\n                // const canvasHeight = videoEl.offsetHeight > videoEl.videoHeight ? videoEl.videoHeight : videoEl.offsetHeight\n                // canvasRef.current.setAttribute('style', `width: ${canvasWidth}px; height: ${canvasHeight}px`)\n            }\n        }\n        ,\n        [containerRef, videoRef, canvasRef]\n    )\n\n    useEffect(() => {\n        const videoEl = videoRef.current;\n        if (videoEl) {\n            videoEl.addEventListener('playing', handleOnReady)\n        }\n\n        return () => {\n            if (videoEl) {\n                videoEl.removeEventListener('playing', handleOnReady)\n            }\n        }\n    }, [handleOnReady, videoRef])\n\n    return (\n        <Fragment>\n            <div\n                className=\"uk-position-relative uk-width-expand uk-height-max-large\"\n                data-uk-data-grid=\"\"\n                ref={containerRef}\n            >\n                {isStartingCamera && (\n                    <Fragment>\n                        <div className=\"uk-overlay-primary uk-position-cover\"/>\n                        <div className=\"uk-overlay uk-position-center uk-light\">\n                            <div data-uk-spinner=\"\"/>\n                        </div>\n                    </Fragment>\n                )}\n                {error && <AlertDanger>{error.message}</AlertDanger>}\n                {errorRecognition && (\n                    <AlertDanger>{errorRecognition.message}</AlertDanger>\n                )}\n                <video className=\"uk-width-expand uk-position-absolute uk-height-max-large\" ref={videoRef}\n                       playsInline={true}\n                       muted={true}\n                       preload=\"none\"\n                />\n                <canvas\n                    className=\"uk-width-expand uk-position-absolute uk-height-max-large\"\n                    ref={canvasRef}\n                />\n            </div>\n            {children}\n        </Fragment>\n    );\n};\n\nexport default FacesDetector;\n","import React, {useMemo} from \"react\";\n\nconst expressionI18N = {\n    angry: \"Nervoso\",\n    disgusted: \"Angustiado\",\n    fearful: \"Com medo\",\n    happy: \"Feliz\",\n    neutral: \"Neutro\",\n    sad: \"Triste\",\n    surprised: \"Surpreso\"\n};\n\nexport const PersonInfo = ({person}) => {\n    const orderedExpressions = useMemo(() => {\n        return Object.entries(person.expressions)\n            .sort((a, b) => {\n                const [, valueA] = a;\n                const [, valueB] = b;\n                return valueB - valueA;\n            })\n            .map(exp => ({key: exp[0], value: exp[1]}));\n    }, [person]);\n    const [topExpression] = orderedExpressions;\n\n    return (\n        <ul className=\"uk-list uk-container\">\n            <li>\n        <span className=\"uk-text-lead\">\n          {(person.genderProbability * 100).toFixed(0)}%\n        </span>{\" \"}\n                de que você seja{\" \"}\n                <span className=\"uk-text-bold\">\n          {person.gender === \"male\" ? \"homem\" : \"mulher\"}\n        </span>\n            </li>\n            <li>\n                <span className=\"uk-text-lead\">{person.age.toFixed(0)}</span> anos\n                de <span className=\"uk-text-bold\">idade</span>\n            </li>\n            <li>\n        <span className=\"uk-text-lead\">\n          {(topExpression.value * 100).toFixed(0)}%\n        </span>{\" \"}\n                de que você esteja{\" \"}\n                <span className=\"uk-text-bold\">\n          {expressionI18N[topExpression.key]}\n        </span>\n            </li>\n        </ul>\n    );\n};\n\nexport default PersonInfo;\n","import React, {useContext} from \"react\";\nimport FacesDetector from \"./FacesDetector\";\nimport StoreContext from \"./StoreContext\";\nimport PersonInfo from \"./PersonInfo\";\n\nconst Camera = () => {\n    const {state} = useContext(StoreContext);\n    const face = state.faceResult;\n    const status = state.statusRecognition;\n    return (\n        <div\n            className=\"uk-position-relative\"\n        >\n            {state.selectedDevice && (\n                <FacesDetector>\n                    {face && (\n                        <PersonInfo person={face}/>\n                    )}\n                </FacesDetector>\n            )}\n            <p className=\"uk-margin-remove uk-text-center\">\n                <small className=\"uk-text-small\">{status}... </small>\n            </p>\n        </div>\n    );\n};\n\nexport default Camera;\n","import firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nconst FIREBASE_CONFIG = {\n    appId: process.env.REACT_APP_FIREBASE_APPID,\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASEURL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENTID,\n};\n\nconsole.log('Loading base initializeApp');\n\nconst app = firebase.initializeApp(FIREBASE_CONFIG);\n\nfirebase.setLogLevel('debug');\n\napp.auth().useDeviceLanguage();\napp.auth().settings.appVerificationDisabledForTesting = true;\n\nconsole.log('Loading firestore');\n\nexport const firestore = app.firestore();\n\nif (process.env.FIRESTORE_EMULATOR_HOST) {\n    console.warn(\n        'Using local emulator firestore \"%s\"',\n        process.env.FIRESTORE_EMULATOR_HOST\n    );\n    firestore.settings({\n        host: process.env.FIRESTORE_EMULATOR_HOST,\n        ssl: false,\n    });\n}\n\nconsole.log('Firestore loaded!');\n\nexport { firebase };\n\nexport default app;\n","import React, { useCallback, useReducer, useEffect, useState } from \"react\";\nimport CameraAccess from \"./CameraAccess\";\nimport StoreContext, { initialState } from \"./StoreContext\";\nimport Devices from \"./Devices\";\nimport mainReducer, {AUTH} from \"./reducers\";\nimport Camera from \"./Camera\";\nimport app from './base';\nimport { getUserProfile } from './api/users';\n\nconst useAuth = function(callback) {\n\n    const [ isAuthenticating, setIsAuthenticating ] = useState(true);\n\n    const handleAuthStateChanged = useCallback(async (user) => {\n        callback(user);\n        if (user) {\n            const profile = await getUserProfile(user.uid).get()\n            console.log(profile.data())\n        } else {\n            await app.auth().signInAnonymously();\n        }\n        setIsAuthenticating(false);\n    }, [callback])\n\n    useEffect(() => {\n        const subscriptionAuth = app.auth().onAuthStateChanged(handleAuthStateChanged);\n        return () => {\n            if (subscriptionAuth) {\n                subscriptionAuth();\n            }\n        }\n    }, [])\n\n    return isAuthenticating\n\n}\n\nexport default function App() {\n    const [state, dispatch] = useReducer(mainReducer, initialState);\n    const [handleCameraAccess, setHandleCameraAccess] = useState(false);\n\n    useAuth((user) => {\n        dispatch({ type: AUTH, payload: user });\n        console.log('User authenticated', user);\n    })\n\n    return (\n        <StoreContext.Provider value={{ state, dispatch }}>\n            <nav className=\"uk-navbar-container\" data-uk-navbar=\"\">\n                <div className=\"uk-navbar-left\">\n                    <a className=\"uk-navbar-item uk-logo\" href=\"#\">\n                        Acertô miseravi\n                    </a>\n                </div>\n\n                {handleCameraAccess && (\n                    <div className=\"uk-navbar-right\">\n                        <ul className=\"uk-navbar-nav\">\n                            <li>\n                                <Devices />\n                            </li>\n                        </ul>\n                    </div>\n                )}\n            </nav>\n\n            {handleCameraAccess && <Camera />}\n\n            {!handleCameraAccess && (\n                <div className=\"uk-container uk-margin-top uk-text-center\">\n                    <p>\n                        Quer apostar que identifico sua{\" \"}\n                        <span className=\"uk-text-lead\">idade</span>, seu{\" \"}\n                        <span className=\"uk-text-lead\">gênero</span> e sua{\" \"}\n                        <span className=\"uk-text-lead\">expressão</span>?\n                    </p>\n                    <CameraAccess onAccess={setHandleCameraAccess} />\n                </div>\n            )}\n\n            <p className=\"uk-text-meta uk-text-muted uk-text-small uk-margin-small uk-text-center\">\n                <a\n                    href=\"https://github.com/ridermansb\"\n                    target=\"_blank\"\n                >\n                    made by ridermansb\n                </a>\n            </p>\n        </StoreContext.Provider>\n    );\n}\n","import { firestore } from '../base'\n\nexport const getUserProfile = (userId) => firestore.collection('users').doc(userId)\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport 'webrtc-adapter/out/adapter_no_edge';\nimport \"uikit\";\nimport UIkit from \"uikit\";\nimport Icons from \"uikit/dist/js/uikit-icons\";\nimport \"uikit/dist/css/uikit.css\";\nimport App from \"./App\";\n\nUIkit.use(Icons);\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    rootElement\n);\n"],"sourceRoot":""}