(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(50)},37:function(e,t){},38:function(e,t){},39:function(e,t){},50:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(20),i=a.n(c),s=(a(28),a(10)),u=a.n(s),o=a(21),l=a.n(o),d=(a(29),a(5)),E=a.n(d),m=a(7),p=a(4),b=function(e){var t=e.title,a=e.children;return r.a.createElement("div",{className:"uk-alert-danger","data-uk-alert":""},t&&r.a.createElement("h3",null,t),r.a.createElement("p",null,a))},v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.getMedia=v;var f=function(e){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):navigator.getMedia?navigator.getMedia(e):v(e)},A=function(e){var t=e.onAccess,a=Object(n.useCallback)(function(){var e=Object(m.a)(E.a.mark(function e(a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,f({video:!0,audio:!1});case 4:n=e.sent,t(null,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement("div",{className:"uk-width-large@l uk-width-expand uk-text-center"},r.a.createElement("div",{"data-uk-alert":""},r.a.createElement("p",{className:"uk-text-lead"},"PARA DETECTAR SUA FACE PRECISAMOS DE ACESSO A SUA C\xc2MERA."),r.a.createElement("button",{className:"uk-button uk-button-primary uk-button-large",onClick:a},"Permir acesso")))},O=function(e){var t=e.onAccess,a=Object(n.useState)(void 0),c=Object(p.a)(a,2),i=c[0],s=c[1],u=Object(n.useState)(void 0),o=Object(p.a)(u,2),l=o[0],d=o[1],E=Object(n.useCallback)(function(e,a){s(a),d(e),a&&t(a)},[s]);return r.a.createElement("div",{className:"uk-flex uk-flex-center uk-flex-middle uk-flex-column"},void 0===i&&r.a.createElement(A,{onAccess:E}),l&&r.a.createElement(b,{title:"Falha ao tentar acessar a c\xe2mera"},l.message))},R={faceResult:void 0,statusRecognition:void 0,selectedDevice:void 0},g=Object(n.createContext)(R),k=a(22),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useRef)(null);return Object(n.useEffect)(function(){var a=t.current;return u.a.dropdown(a,e),function(){u.a.dropdown(a,e).$destroy()}},[t,e]),t},S=a(6),j="SELECT_DEVICE",h="AUTH",I=function(e,t){switch(t.type){case j:return Object(S.a)(Object(S.a)({},e),{},{selectedDevice:t.payload});case"SET_STATUS_RECOGNITION":return Object(S.a)(Object(S.a)({},e),{},{statusRecognition:t.payload});case"SET_FACES_RESULT":return Object(S.a)(Object(S.a)({},e),{},{faceResult:t.payload});case h:return Object(S.a)(Object(S.a)({},e),{},{authUser:t.payload});default:return e}},C=function(e){var t=e.device,a=e.active,c=Object(n.useContext)(g).dispatch,i=Object(k.a)({"uk-active":a}),s=Object(n.useCallback)(function(e){e.preventDefault(),c({type:j,payload:t})},[t,c]);return r.a.createElement("li",{className:i},r.a.createElement("button",{className:"uk-button uk-button-text",onClick:s},t.label))},T=function(){var e=Object(n.useContext)(g),t=e.state,a=e.dispatch,c=Object(n.useState)([]),i=Object(p.a)(c,2),s=i[0],u=i[1];Object(n.useEffect)(function(){function e(){return(e=Object(m.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:t=e.sent,n=t.filter(function(e){return"videoinput"===e.kind}),u(n),n.length>0&&a({type:j,payload:n[0]});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}navigator.mediaDevices&&function(){e.apply(this,arguments)}()},[a]);var o=_({mode:"click",boundary:"! .uk-button-group","boundary-align":!0});return r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"#"},t.selectedDevice?t.selectedDevice.label:"Selecionar c\xe2mera",r.a.createElement("span",{"data-uk-icon":"icon:  triangle-down"})),r.a.createElement("div",{className:"uk-navbar-dropdown",ref:o},r.a.createElement("ul",{className:"uk-nav uk-navbar-dropdown-nav"},s.map(function(e){return r.a.createElement(C,{device:e,key:e.deviceId,active:t.selectedDevice&&e.deviceId===t.selectedDevice.deviceId})}))))};var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useRef)(null),a=Object(n.useState)(void 0),r=Object(p.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(!0),u=Object(p.a)(s,2),o=u[0],l=u[1],d=Object(n.useRef)(null),b=Object(n.useCallback)(Object(m.a)(E.a.mark(function a(){var n;return E.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l(!0),i(void 0),a.next=5,f(e);case 5:n=a.sent,"srcObject"in t.current?t.current.srcObject=n:t.current.src=URL.createObjectURL(n),t.current.setAttribute("playsinline",!0),t.current.setAttribute("autoplay",""),t.current.setAttribute("muted",""),t.current.play(),d.current=n,a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),i(a.t0);case 17:return a.prev=17,l(!1),a.finish(17);case 20:case"end":return a.stop()}},a,null,[[0,14,17,20]])})),[e,t,d]);return Object(n.useEffect)(function(){b()},[]),Object(n.useEffect)(function(){var e=t.current,a=d.current;return function(){e&&(a&&a.stop&&a.stop(),d.current=void 0,e.src=null,t.current=void 0)}},[d,t]),{ref:t,isStarting:o,error:c,streamRef:d}},x=a(8),N=new x.a({inputSize:224,scoreThreshold:.5}),F="Carregando Modelos",y="Erro ao tentar carregar modelos",D=function(e,t,a){var r=Object(n.useRef)(null),c=Object(n.useRef)(null),i=Object(n.useState)("Iniciando"),s=Object(p.a)(i,2),u=s[0],o=s[1],l=Object(n.useState)(void 0),d=Object(p.a)(l,2),b=d[0],v=d[1],f=Object(n.useState)(void 0),A=Object(p.a)(f,2),O=A[0],R=A[1],g=Object(n.useCallback)(Object(m.a)(E.a.mark(function e(){var n,i,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.current&&window.cancelAnimationFrame(c.current),a.readyState!==a.HAVE_ENOUGH_DATA){e.next=10;break}return o("Detectando rostos"),e.next=5,Object(x.b)(a,N).withAgeAndGender().withFaceExpressions();case 5:n=e.sent,o("Conclu\xeddo"),n?(R(n),i=Object(x.h)(t,a,!0),s=Object(x.i)(n,i),x.c.drawDetections(t,s),x.c.drawFaceExpressions(t,s)):(R(void 0),r.current.clearRect(0,0,a.videoWidth,a.videoHeight)),e.next=11;break;case 10:o("Aguardando video");case 11:c.current=requestAnimationFrame(g);case 12:case"end":return e.stop()}},e)})),[a,t]);return Object(n.useEffect)(function(){function a(){return(a=Object(m.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(F),v(void 0),e.next=5,Promise.all([Object(x.g)("/models"),Object(x.e)("/models"),Object(x.f)("/models"),Object(x.d)("/models")]);case 5:r.current=t.getContext("2d"),g(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v(e.t0),o(y);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}e&&function(){a.apply(this,arguments)}()},[e,t,g]),{status:u,error:b,faceDetected:O}},w=function(e){var t=e.children,a=Object(n.useContext)(g),c=a.state,i=a.dispatch,s=Object(n.useRef)(null),u=Object(n.useRef)(null),o=Object(n.useMemo)(function(){return Object(S.a)(Object(S.a)({},{audio:!1,video:{facingMode:"user",width:{min:320},height:{min:240},frameRate:{ideal:60,min:10}}}),{},{deviceId:c.selectedDevice?{exact:c.selectedDevice.deviceId}:void 0})},[c]),l=P(o),d=l.ref,E=l.isStarting,m=l.error,p=l.streamRef,v=D(p.current&&!E,s.current,d.current),f=v.status,A=v.error,O=v.faceDetected;Object(n.useLayoutEffect)(function(){i({type:"SET_STATUS_RECOGNITION",payload:f}),i({type:"SET_FACES_RESULT",payload:O})},[i,O,f]);var R=Object(n.useCallback)(function(){var e=u.current;e&&e.setAttribute("style","width: ".concat(d.current.offsetWidth,"px; height: ").concat(d.current.offsetHeight,"px"))},[u,d,s]);return Object(n.useEffect)(function(){var e=d.current;return e&&e.addEventListener("playing",R),function(){e&&e.removeEventListener("playing",R)}},[R,d]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-position-relative uk-width-expand uk-height-max-large","data-uk-data-grid":"",ref:u},E&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-overlay-primary uk-position-cover"}),r.a.createElement("div",{className:"uk-overlay uk-position-center uk-light"},r.a.createElement("div",{"data-uk-spinner":""}))),m&&r.a.createElement(b,null,m.message),A&&r.a.createElement(b,null,A.message),r.a.createElement("video",{className:"uk-width-expand uk-position-absolute uk-height-max-large",ref:d,playsInline:!0,muted:!0,preload:"none"}),r.a.createElement("canvas",{className:"uk-width-expand uk-position-absolute uk-height-max-large",ref:s})),t)},U={angry:"Nervoso",disgusted:"Angustiado",fearful:"Com medo",happy:"Feliz",neutral:"Neutro",sad:"Triste",surprised:"Surpreso"},B=function(e){var t=e.person,a=Object(n.useMemo)(function(){return Object.entries(t.expressions).sort(function(e,t){var a=Object(p.a)(e,2)[1];return Object(p.a)(t,2)[1]-a}).map(function(e){return{key:e[0],value:e[1]}})},[t]),c=Object(p.a)(a,1)[0];return r.a.createElement("ul",{className:"uk-list uk-container"},r.a.createElement("li",null,r.a.createElement("span",{className:"uk-text-lead"},(100*t.genderProbability).toFixed(0),"%")," ","de que voc\xea seja"," ",r.a.createElement("span",{className:"uk-text-bold"},"male"===t.gender?"homem":"mulher")),r.a.createElement("li",null,r.a.createElement("span",{className:"uk-text-lead"},t.age.toFixed(0))," anos de ",r.a.createElement("span",{className:"uk-text-bold"},"idade")),r.a.createElement("li",null,r.a.createElement("span",{className:"uk-text-lead"},(100*c.value).toFixed(0),"%")," ","de que voc\xea esteja"," ",r.a.createElement("span",{className:"uk-text-bold"},U[c.key])))},L=function(){var e=Object(n.useContext)(g).state,t=e.faceResult,a=e.statusRecognition;return r.a.createElement("div",{className:"uk-position-relative"},e.selectedDevice&&r.a.createElement(w,null,t&&r.a.createElement(B,{person:t})),r.a.createElement("p",{className:"uk-margin-remove uk-text-center"},r.a.createElement("small",{className:"uk-text-small"},a,"... ")))},M=a(12),G=a.n(M);a(44),a(48);console.log("Loading base initializeApp");var H=G.a.initializeApp({appId:"1:43348649115:web:06ae836a943d22b10d923e",apiKey:"AIzaSyD5ySCzCgvHLhFXLvqqpbJXbnhl4IWnlF0",authDomain:"production-face-ai.firebaseapp.com",databaseURL:"https://production-face-ai.firebaseio.com",projectId:"production-face-ai",storageBucket:"production-face-ai.appspot.com",messagingSenderId:"43348649115",measurementId:"G-F5XFKNSZ4N"});G.a.setLogLevel("debug"),H.auth().useDeviceLanguage(),H.auth().settings.appVerificationDisabledForTesting=!0,console.log("Loading firestore");var z=H.firestore();Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyD5ySCzCgvHLhFXLvqqpbJXbnhl4IWnlF0",REACT_APP_FIREBASE_APPID:"1:43348649115:web:06ae836a943d22b10d923e",REACT_APP_FIREBASE_AUTHDOMAIN:"production-face-ai.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://production-face-ai.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"production-face-ai",REACT_APP_FIREBASE_STORAGEBUCKET:"production-face-ai.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"43348649115",REACT_APP_FIREBASE_MEASUREMENTID:"G-F5XFKNSZ4N"}).FIRESTORE_EMULATOR_HOST&&(console.warn('Using local emulator firestore "%s"',Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyD5ySCzCgvHLhFXLvqqpbJXbnhl4IWnlF0",REACT_APP_FIREBASE_APPID:"1:43348649115:web:06ae836a943d22b10d923e",REACT_APP_FIREBASE_AUTHDOMAIN:"production-face-ai.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://production-face-ai.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"production-face-ai",REACT_APP_FIREBASE_STORAGEBUCKET:"production-face-ai.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"43348649115",REACT_APP_FIREBASE_MEASUREMENTID:"G-F5XFKNSZ4N"}).FIRESTORE_EMULATOR_HOST),z.settings({host:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyD5ySCzCgvHLhFXLvqqpbJXbnhl4IWnlF0",REACT_APP_FIREBASE_APPID:"1:43348649115:web:06ae836a943d22b10d923e",REACT_APP_FIREBASE_AUTHDOMAIN:"production-face-ai.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://production-face-ai.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"production-face-ai",REACT_APP_FIREBASE_STORAGEBUCKET:"production-face-ai.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"43348649115",REACT_APP_FIREBASE_MEASUREMENTID:"G-F5XFKNSZ4N"}).FIRESTORE_EMULATOR_HOST,ssl:!1})),console.log("Firestore loaded!");var q=H,X=function(e){var t=Object(n.useState)(!0),a=Object(p.a)(t,2),r=a[0],c=a[1],i=Object(n.useCallback)(function(){var t=Object(m.a)(E.a.mark(function t(a){var n;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e(a),!a){t.next=8;break}return t.next=4,(r=a.uid,z.collection("users").doc(r)).get();case 4:n=t.sent,console.log(n.data()),t.next=10;break;case 8:return t.next=10,q.auth().signInAnonymously();case 10:c(!1);case 11:case"end":return t.stop()}var r},t)}));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(n.useEffect)(function(){var e=q.auth().onAuthStateChanged(i);return function(){e&&e()}},[]),r};function K(){var e=Object(n.useReducer)(I,R),t=Object(p.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(p.a)(i,2),u=s[0],o=s[1];return X(function(e){c({type:h,payload:e}),console.log("User authenticated",e)}),r.a.createElement(g.Provider,{value:{state:a,dispatch:c}},r.a.createElement("nav",{className:"uk-navbar-container","data-uk-navbar":""},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement("a",{className:"uk-navbar-item uk-logo",href:"#"},"Acert\xf4 miseravi")),u&&r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(T,null))))),u&&r.a.createElement(L,null),!u&&r.a.createElement("div",{className:"uk-container uk-margin-top uk-text-center"},r.a.createElement("p",null,"Quer apostar que identifico sua"," ",r.a.createElement("span",{className:"uk-text-lead"},"idade"),", seu"," ",r.a.createElement("span",{className:"uk-text-lead"},"g\xeanero")," e sua"," ",r.a.createElement("span",{className:"uk-text-lead"},"express\xe3o"),"?"),r.a.createElement(O,{onAccess:o})),r.a.createElement("p",{className:"uk-text-meta uk-text-muted uk-text-small uk-margin-small uk-text-center"},r.a.createElement("a",{href:"https://github.com/ridermansb",target:"_blank"},"made by ridermansb")))}u.a.use(l.a);var J=document.getElementById("root");i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),J)}},[[23,1,2]]]);
//# sourceMappingURL=main.dbda8860.chunk.js.map